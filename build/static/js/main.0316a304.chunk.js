(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var r=t(4),o=t.n(r),c=t(21),a=t.n(c),u=(t(20),t(9)),i=t(10),s="/api/persons",l=function(){return i.a.get(s).then((function(e){return e.data}))},d=function(e){return i.a.post(s,e).then((function(e){return e.data}))},h=function(e){return i.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.status}))},b=function(e,n){return i.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},j=t(2),f=function(e){var n=e.searchString,t=e.handleSearchString,r=e.handleClearSearchBox;return Object(j.jsxs)("form",{onSubmit:r,children:[Object(j.jsxs)("div",{children:["search",Object(j.jsx)("input",{text:"search",value:n,onChange:t}),Object(j.jsx)("button",{type:"submit",children:"clear"})]}),Object(j.jsx)("br",{})]})},m=function(e){var n=e.person,t=e.deletePerson;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("li",{children:[n.name," : ",n.number]}),Object(j.jsx)("button",{onClick:function(){return t(n)},children:"Delete"})]})},O=function(e){var n=e.addPerson,t=e.newName,r=e.handleNewName,o=e.newNumber,c=e.handleNewNumber;return Object(j.jsxs)("form",{onSubmit:n,children:[Object(j.jsxs)("div",{children:["name",Object(j.jsx)("input",{text:"name",value:t,onChange:r})]}),Object(j.jsxs)("div",{children:["number",Object(j.jsx)("input",{text:"number",value:o,onChange:c})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})},g=function(e){var n=e.searchMatches,t=e.deletePerson;return Object(j.jsx)("ul",{children:n.map((function(e,n){return Object(j.jsx)(m,{person:e,deletePerson:t},n)}))})},x=function(e){var n=e.message;return null===n?null:Object(j.jsx)("div",{className:"error",style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n})},v=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],c=Object(r.useState)(""),a=Object(u.a)(c,2),i=a[0],s=a[1],m=Object(r.useState)(""),v=Object(u.a)(m,2),p=v[0],w=v[1],S=Object(r.useState)(""),N=Object(u.a)(S,2),C=N[0],k=N[1],y=Object(r.useState)(null),P=Object(u.a)(y,2),T=P[0],L=P[1];Object(r.useEffect)((function(){l().then((function(e){o(e)}))}),[]);var B=function(){s(""),w("")},F=t.filter((function(e){return e.name.toLowerCase().includes(C.toLowerCase())})),D=t.map((function(e){return e.name.trim().toLowerCase()})),M=t.find((function(e){return e.name.trim().toLowerCase()===i}));return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(x,{message:T}),Object(j.jsx)(f,{searchString:C,handleSearchString:function(e){k(e.target.value)},handleClearSearchBox:function(e){return k("")}}),Object(j.jsx)(O,{newName:i,addPerson:function(e){e.preventDefault();var n={name:i.trim(),number:p};if(""===i||""===p)return alert("You Haven't entered a Name and Number"),B(),!1;if(!D.includes(i.trim().toLowerCase()))return d(n).then((function(e){o(t.concat(e)),console.log(t)})).then(L(" '".concat(n.name,"' has been added to phonebook"))).then(setTimeout((function(){L(null)}),5e3)),B(),!0;if(window.confirm("".concat(i.trim()," is already added to the phonebook, replace the old number with a new one?"))){var r=M;console.log("personObject",n),console.log("objectToUpdate.id",M.id),b(M.id,n).then((function(e){o(t.map((function(n){return n.id!==r.id?n:e})))})).then(L(" '".concat(r.name,"' has been added to phonebook"))).then(B()).then(setTimeout((function(){L(null)}),5e3)).catch((function(e){return L(" '".concat(r.name,"' was already removed from server")),setTimeout((function(){L(null)}),5e3),l().then((function(e){o(e),console.log(t)})),B(),!1}))}},handleNewName:function(e){s(e.target.value)},newNumber:p,handleNewNumber:function(e){w(e.target.value)}}),Object(j.jsx)("h2",{children:"Numbers"}),Object(j.jsx)(g,{deletePerson:function(e){window.confirm("Do you really want to delete ".concat(e.name))&&h(e.id).then((function(n){var r=t.filter((function(n){return n.id!==e.id}));o(r)})).then(L(" '".concat(e.name,"' has been deleted from phonebook"))).then(setTimeout((function(){L(null)}),5e3)).catch((function(n){L(" '".concat(e.name,"' was already removed from server")),console.log("delete error caught"),setTimeout((function(){L(null)}),5e3);var r=t.filter((function(n){return n.id!==e.id}));o(r)}))},searchMatches:F})]})},p=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,38)).then((function(n){var t=n.getCLS,r=n.getFID,o=n.getFCP,c=n.getLCP,a=n.getTTFB;t(e),r(e),o(e),c(e),a(e)}))};a.a.createRoot(document.getElementById("root")).render(Object(j.jsx)(o.a.StrictMode,{children:Object(j.jsx)(v,{})})),p()}},[[37,1,2]]]);
//# sourceMappingURL=main.0316a304.chunk.js.map